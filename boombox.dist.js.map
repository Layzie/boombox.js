{"version":3,"sources":["boombox.js"],"names":[],"mappings":"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","file":"boombox.js","sourcesContent":["/**\n * Browser sound library which blended HTMLVideo and HTMLAudio and WebAudio\n *\n * The MIT License (MIT)\n *\n * Copyright (c) 2014 CyberAgent, Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy of\n * this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to\n * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of\n * the Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\n * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\n * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n *\n *\n * @license MIT\n * @author Kei Funagayama <funagayama_kei@cyberagent.co.jp>\n */\n(function (w) {\n    'use strict';\n\n    var none = function () {};\n\n    var isRequire = !!(typeof define === 'function' && define.amd);\n\n    const SPRITE_SEPARATOR = '-';\n    const LOGGER_DEFAULT_SEPARATOR = '-';\n\n    var getSpriteName = function (name) {\n        return {\n            prefix: name.substring(0, name.indexOf(SPRITE_SEPARATOR)),\n            suffix: name.substring(name.indexOf(SPRITE_SEPARATOR) + 1),\n            name: name\n        };\n    };\n\n    /**\n     * trace: 1\n     * debug: 2\n     * info:  3\n     * warn:  4\n     * error: 5\n     *\n     */\n    var LOG_LEVEL = 3; // default: info\n    var slice = Array.prototype.slice;\n\n    class Logger {\n        constructor(prefix) {\n            this.prefix = prefix || LOGGER_DEFAULT_SEPARATOR;\n            this.prefix = '[' + this.prefix + ']';\n        }\n        trace() {\n        /**\n         * Log output (trace)\n         * @memberof Logger\n         * @name trace\n         */\n            if (LOG_LEVEL <= 1) {\n                if (!w.console) {\n                } else if (w.console.trace) {\n                    w.console.trace('[TRACE]', this.prefix, slice.call(arguments).join(' '));\n                } else if (w.console.debug) {\n                    w.console.debug('[TRACE]', this.prefix, slice.call(arguments).join(' '));\n                } else {\n                    w.console.log('[TRACE]', this.prefix, slice.call(arguments).join(' '));\n                }\n            }\n        }\n        debug() {\n        /**\n         * Log output (info)\n         * @memberof Logger\n         * @name debug\n         */\n            if (LOG_LEVEL <= 2) {\n                if (!w.console) {\n                } else if (w.console.debug) {\n                    w.console.debug('[DEBUG]', this.prefix, slice.call(arguments).join(' '));\n                } else {\n                    w.console.log('[DEBUG]', this.prefix, slice.call(arguments).join(' '));\n                }\n            }\n        }\n        info() {\n        /**\n         * Log output (info)\n         * @memberof Logger\n         * @name info\n         */\n            if (LOG_LEVEL <= 3) {\n                w.console && w.console.info('[INFO]', this.prefix, slice.call(arguments).join(' '));\n            }\n        }\n        warn() {\n        /**\n         * Log output (warn)\n         * @memberof Logger\n         * @name warn\n         */\n            if (LOG_LEVEL <= 4) {\n                w.console && w.console.warn('[WARN]', this.prefix, slice.call(arguments).join(' '));\n            }\n        }\n        error() {\n        /**\n         * Log output (error)\n         * @memberof Logger\n         * @name error\n         */\n            if (LOG_LEVEL <= 5) {\n                w.console && w.console.error('[ERROR]', this.prefix, slice.call(arguments).join(' '));\n            }\n        }\n    }\n\n    //////////////////////////////////\n    // Boombox Class\n\n    class Boombox {\n        constructor() {\n            /**\n             * Version\n             * @memberof Boombox\n             * @name VERSION\n             */\n            this.VERSION = '1.0.8';\n\n\n            /**\n             * Loop off\n             *\n             * @memberof Boombox\n             * @name LOOP_NOT\n             * @constant\n             * @type {Interger}\n             */\n            this.LOOP_NOT = 0;\n\n\n            /**\n             * orignal loop\n             *\n             * @memberof Boombox\n             * @name LOOP_ORIGINAL\n             * @constant\n             * @type {Interger}\n             */\n            this.LOOP_ORIGINAL = 1;\n\n\n            /**\n             * Native loop\n             *\n             * @memberof Boombox\n             * @name LOOP_NATIVE\n             * @constant\n             * @type {Interger}\n             */\n            this.LOOP_NATIVE = 2;\n\n            /**\n             * Turn off the power.\n             *\n             * @memberof Boombox\n             * @name POWER_OFF\n             * @constant\n             * @type {Boolean}\n             */\n            this.POWER_OFF = false;\n\n            /**\n             * Turn on the power.\n             *\n             * @memberof Boombox\n             * @name POWER_ON\n             * @constant\n             * @type {Boolean}\n             */\n            this.POWER_ON = true;\n\n            /**\n             * It does not support the media type.\n             *\n             * @memberof Boombox\n             * @name ERROR_MEDIA_TYPE\n             * @constant\n             * @type {Interger}\n             */\n            this.ERROR_MEDIA_TYPE = 0;\n\n            /**\n             * Hit the filter\n             *\n             * @memberof Boombox\n             * @name ERROR_HIT_FILTER\n             * @constant\n             * @type {Interger}\n             */\n            this.ERROR_HIT_FILTER = 1;\n\n            /**\n             * Threshold to determine whether sound source is finished or not\n             *\n             * @memberof Boombox\n             * @name THRESHOLD\n             * @type {Interger}\n             */\n            this.THRESHOLD = 0.2;\n\n            /**\n             * flag setup\n             * @memberof Boombox\n             * @name setuped\n             * @type {Boolean}\n             */\n            this.setuped = false;\n\n            /**\n             * AudioContext\n             * @memberof Boombox\n             * @name AudioContext\n             * @type {AudioContext}\n             */\n            this.AudioContext = w.AudioContext || w.webkitAudioContext;\n\n            /**\n             * Environmental support information\n             *\n             * @memberof Boombox\n             * @name support\n             * @type {Object}\n             */\n            this.support = {\n                mimes: [],\n                webaudio: {\n                    use: !!this.AudioContext\n                },\n                htmlaudio: {\n                    use: false\n                },\n                htmlvideo: {\n                    use: false\n                }\n            };\n\n            if (this.support.webaudio.use) {\n                /**\n                 * WebAudioContext instance (singleton)\n                 *\n                 * @memberof Boombox\n                 * @name WEB_AUDIO_CONTEXT\n                 * @type {AudioContext}\n                 */\n                this.WEB_AUDIO_CONTEXT = new this.AudioContext();\n                if (!this.WEB_AUDIO_CONTEXT.createGain) {\n                    this.WEB_AUDIO_CONTEXT.createGain = this.WEB_AUDIO_CONTEXT.createGainNode;\n                }\n            }\n\n            // Check HTML Audio support.\n            try {\n                /**\n                 * Test local HTMLAudio\n                 * @memberof Boombox\n                 * @name _audio\n                 * @type {HTMLAudioElement}\n                 */\n                this._audio = new w.Audio();\n                if (this._audio.canPlayType) {\n                    this.support.htmlaudio.use = true;\n                } else {\n                    this.support.htmlaudio.use = false;\n                }\n            } catch (e) {\n                this.support.htmlaudio.use = false;\n            }\n\n            // Check HTML Video support.\n            try {\n                /**\n                 * Test local HTMLVideo\n                 * @memberof Boombox\n                 * @name _video\n                 * @type {HTMLVideoElement}\n                 */\n                this._video = document.createElement('video');\n                if (this._video.canPlayType) {\n                    this.support.htmlvideo.use = true;\n                } else {\n                    this.support.htmlvideo.use = false;\n                }\n            } catch (e) {\n                this.support.htmlvideo.use = false;\n            }\n\n            /**\n             * Audio instance pool\n             *\n             * @memberof Boombox\n             * @name pool\n             */\n            this.pool = {};\n\n            /**\n             * Audio instance of waiting\n             *\n             * @memberof Boombox\n             * @name waits\n             */\n            this.waits = [];\n\n            /**\n             * Visibility of browser\n             *\n             * @memberof Boombox\n             * @name visibility\n             */\n            this.visibility = {\n                hidden: undefined,\n                visibilityChange: undefined\n            };\n\n            /**\n             * State of boombox\n             *\n             * @memberof Boombox\n             * @name state\n             * @type {Object}\n             */\n            this.state = {\n                power: this.POWER_ON\n            };\n\n            /**\n             * Filtering function\n             *\n             * @memberof Boombox\n             * @name filter\n             * @type {Object}\n             */\n            this.filter = {};\n\n        }\n        isWebAudio() {\n        /**\n         * The availability of the WebLAudio\n         *\n         * @memberof Boombox\n         * @name isWebAudio\n         * @return {Boolean}\n         */\n            return this.support.webaudio.use;\n        }\n        isHTMLAudio() {\n        /**\n         * The availability of the HTMLAudio\n         *\n         * @memberof Boombox\n         * @name isHTMLAudio\n         * @return {Boolean}\n         */\n            return this.support.htmlaudio.use;\n        }\n        isHTMLVideo() {\n        /**\n         * The availability of the HTMLVideo\n         *\n         * @memberof Boombox\n         * @name isHTMLVideo\n         * @return {Boolean}\n         */\n            return this.support.htmlvideo.use;\n        }\n        isPlayback() {\n            var res = false;\n\n            for (let name in this.pool) {\n                if (this.pool[name].isPlayback()) {\n                    res = true;\n                    break;\n                }\n            }\n\n            return res;\n        }\n        setup(options) {\n        /**\n         * Setup processing\n         *\n         * @memberof Boombox\n         * @name setup\n         * @param {Object} options\n         * @return {Boombox}\n         * @example\n         * var options = {\n         *     webaudio: {use: Boolean},\n         *     htmlaudio: {use: Boolean},\n         *     htmlvideo: {use: Boolean},\n         *     loglevel: Number, ) trace:1, debug:2, info:3, warn:4, error:5\n         * }\n         *\n         */\n            options = options || {};\n\n            if (typeof options.threshold !== 'undefined') {\n                this.THRESHOLD = options.threshold;\n            }\n\n            if (typeof options.loglevel !== 'undefined') {\n                LOG_LEVEL = options.loglevel;\n            }\n\n            this.logger = new Logger('Boombox '); // log\n\n            if (this.setuped) {\n                this.logger.warn('\"setup\" already, are running.');\n                return this;\n            }\n\n            if (options.webaudio) {\n                if (typeof options.webaudio.use !== 'undefined') {\n                    this.support.webaudio.use = options.webaudio.use;\n                    this.logger.info('options.webaudio.use:', this.support.webaudio.use);\n                }\n            }\n\n            if (options.htmlaudio) {\n                if (typeof options.htmlaudio.use !== 'undefined') {\n                    this.support.htmlaudio.use = options.htmlaudio.use;\n                    this.logger.info('options.htmlaudio.use: ', this.support.htmlaudio.use);\n                }\n            }\n\n            if (options.htmlvideo) {\n                if (typeof options.htmlvideo.use !== 'undefined') {\n                    this.support.htmlvideo.use = options.htmlvideo.use;\n                    this.logger.info('options htmlvideo', this.support.htmlvideo);\n                }\n            }\n\n            // scan browser\n            this._browserControl();\n\n\n            // Log: WebAudio support.\n            if (this.support.webaudio.use) {\n                this.logger.debug('WebAudio use support.');\n            } else {\n                this.logger.debug('WebAudio use not support.');\n            }\n            // Log: HTMLAudio support.\n            if (this.support.htmlaudio.use) {\n                this.logger.debug('HTMLAudio use support.');\n            } else {\n                this.logger.debug('HTMLAudio use not support.');\n            }\n            // Log: HTMLVideo support.\n            if (this.support.htmlvideo.use) {\n                this.logger.debug('HTMLVideo use support.');\n            } else {\n                this.logger.debug('HTMLVideo use not support.');\n            }\n\n            this.setuped = true;\n\n            return this;\n        }\n        get(name) {\n        /**\n         * Get Audio instance\n         *\n         * @memberof Boombox\n         * @name get\n         * @param {String} name audio name\n         * @return {WebAudio|HTMLAudio|HTMLVideo}\n         */\n            return this.pool[name];\n        }\n        load(name, options, useHTMLVideo, callback) {\n        /**\n         * Loading audio\n         *\n         * @memberof Boombox\n         * @name load\n         * @param {String} name audio name\n         * @param {Object} options Audio options\n         * @param {Boolean} useHTMLVideo forced use HTMLVideo\n         * @param {Function} callback\n         * @return {Boombox}\n         * @example\n         * var options = {\n         *     src: [\n         *         {\n         *             media: 'audio/mp4',\n         *             path: 'http://example.com/sample.m4a',\n         *         }\n         *     ]\n         *     filter: ['android2', 'android4', 'ios5', 'ios6', 'ios7' ]\n         * }\n         *\n         */\n            if (typeof arguments[2] === 'function') {\n                callback = useHTMLVideo;\n                useHTMLVideo = null;\n            }\n\n            if (!this.setuped) {\n                callback && callback(new Error('setup incomplete boombox. run: boombox.setup(options)'));\n                return this;\n            }\n\n            if (this.pool[name]) {\n                this.logger.trace('audio pool cache hit!!', name);\n                return callback && callback(null, this.pool[name]);\n            }\n\n            // check support media type\n            var src = this.useMediaType(options.src);\n            if (src) {\n                options.media = src.media;\n                options.src = src.path;\n            }\n\n            // forced use HTMLVideo\n            if (useHTMLVideo && this.isHTMLVideo()) {\n                var htmlvideo = new boombox.HTMLVideo(name);\n\n                if (!src) {\n                    htmlvideo.state.error = this.ERROR_MEDIA_TYPE;\n                }\n\n                if (typeof htmlvideo.state.error === 'undefined' && !this.runfilter(htmlvideo, options)) {\n                    htmlvideo.load(options, callback);\n                } else {\n                    return callback && callback(new Error(htmlvideo.state.error), htmlvideo);\n                }\n\n                this.setPool(name, htmlvideo, boombox.HTMLVideo);\n\n                return this;\n            }\n\n            //////////////////////\n\n            if (this.isWebAudio()) {\n                this.logger.debug(\"use web audio\");\n                var webaudio = new boombox.WebAudio(name);\n\n                if (!src) {\n                    webaudio.state.error = this.ERROR_MEDIA_TYPE;\n                }\n\n                if (typeof webaudio.state.error === 'undefined' && !this.runfilter(webaudio, options)) {\n                    webaudio.load(options, callback);\n                } else {\n                    return callback && callback(new Error(webaudio.state.error), webaudio);\n                }\n\n                this.setPool(name, webaudio, boombox.WebAudio);\n\n\n            } else if (this.isHTMLAudio()) {\n                this.logger.debug(\"use html audio\");\n                var htmlaudio = new boombox.HTMLAudio(name);\n                if (!src) {\n                    htmlaudio.state.error = this.ERROR_MEDIA_TYPE;\n                }\n\n                if (typeof htmlaudio.state.error === 'undefined' && !this.runfilter(htmlaudio, options)) {\n                    htmlaudio.load(options, callback);\n                } else {\n                    return callback && callback(new Error(htmlaudio.state.error), htmlaudio);\n                }\n\n\n                this.setPool(name, htmlaudio, boombox.HTMLAudio);\n\n            } else {\n                callback && callback(new Error('This environment does not support HTMLAudio, both WebAudio both.'), this);\n            }\n\n            return this;\n\n        }\n        remove(name) {\n        /**\n         * remove audio\n         *\n         * @memberof Boombox\n         * @name remove\n         * @param {String} name\n         * @return {Boombox}\n         */\n            if (this.pool[name]) {\n                // change object\n                this.logger.trace('Remove Audio that is pooled. name', name);\n                this.pool[name].dispose && this.pool[name].dispose();\n                this.pool[name] = undefined;\n                delete this.pool[name];\n            }\n            return this;\n        }\n        setPool(name, obj, Obj) {\n        /**\n         * Set pool\n         *\n         * @memberof Boombox\n         * @name setPool\n         * @param {String} name\n         * @param {AudioContext|HTMLAudioElement|HTMLVideoElement} obj Browser audio instance\n         * @param {WebAudio|HTMLAudio|HTMLVideo} Obj Boombox audio class\n         * @return {Boombox}\n         */\n            if (obj.isParentSprite()) {\n                for (let r in this.pool) {\n                    if (!! ~r.indexOf(name + SPRITE_SEPARATOR)) {\n                        delete this.pool[r];\n                    }\n                }\n\n                for (let n in obj.sprite.options) {\n                    var cname = name + SPRITE_SEPARATOR + n;\n                    var audio = new Obj(cname, obj);\n                    this.pool[audio.name] = audio;\n                }\n            }\n\n            this.remove(name);\n            this.pool[name] = obj;\n\n            return this;\n        }\n        runfilter(audio, options) {\n        /**\n         * Run filter\n         *\n         * @memberof Boombox\n         * @name runfilter\n         * @param {WebAudio|HTMLAudio|HTMLVideo} audio Boombox audio instance\n         * @param {Object} options\n         * @return {Boolean}\n         */\n            var hit;\n\n            var list = options.filter || [];\n\n            for (let i = 0; i < list.length; i++) {\n                let name = list[i];\n\n                let fn = this.filter[name];\n                if (!fn) {\n                    this.logger.warn('filter not found. name:', name);\n                    return;\n                }\n                this.logger.debug('filter run. name:', name);\n\n                if (fn(name, audio, options)) {\n                    hit = name;\n                    break;\n                }\n            }\n\n            if (hit) {\n                audio.state.error = this.ERROR_HIT_FILTER; // set error\n                this.logger.warn('Hit the filter of', hit);\n                return true;\n            }\n\n            return false;\n        }\n        useMediaType(src) {\n        /**\n         * check support media type\n         *\n         * @memberof Boombox\n         * @name useMediaType\n         * @param {Array} src audio file data\n         * @return {Object|undefined}\n         */\n            for (let i = 0; i < src.length; i++) {\n                var t = src[i];\n                if (this._audio.canPlayType(t.media)) {\n                    return t;\n                } else {\n                    this.logger.warn('skip audio type.', t.media);\n                }\n            }\n\n            return undefined;\n        }\n        pause() {\n        /**\n         * pause sound playback in managing boombox\n         *\n         * @memberof Boombox\n         * @name pause\n         * @return {boombox}\n         */\n            var self = this;\n            this.logger.trace('pause');\n\n            for (let name in this.pool) {\n                var audio = this.pool[name];\n                audio.pause();\n                self.waits.push(name);\n            }\n\n            return this;\n        }\n        resume() {\n        /**\n         * resume the paused, to manage the boombox\n         *\n         * @memberof Boombox\n         * @name resume\n         * @return {Boombox}\n         */\n            this.logger.trace('resume');\n            var name = this.waits.shift();\n            if (name && this.pool[name]) {\n                this.pool[name].resume();\n            }\n            if (0 < this.waits.length) {\n                this.resume();\n            }\n            return this;\n        }\n        power(p) {\n        /**\n         * Change all audio power on/off\n         *\n         * @memberof Boombox\n         * @name power\n         * @param {Boolean} p power on/off. boombox.(POWER_ON|POWER_OFF)\n         * @return {Boombox}\n         */\n            var self = this;\n            this.logger.trace('power:', this.name, 'flag:', p);\n\n            for (let name in this.pool) {\n                var audio = this.pool[name];\n                audio.power(p);\n            }\n\n            this.state.power = p;\n            return this;\n        }\n        volume(v) {\n        /**\n         * audio change volume.\n         *\n         * @memberof Boombox\n         * @method\n         * @name volume\n         * @param {Interger} v volume\n         * @return {Boombox}\n         */\n            var self = this;\n            this.logger.trace('volume:', this.name, 'volume:', v);\n\n            for (let name in this.pool) {\n                var audio = this.pool[name];\n                audio.volume(v);\n            }\n\n            return this;\n        }\n        onVisibilityChange(e) {\n        /**\n         * Firing in the occurrence of events VisibilityChange\n         *\n         * @memberof Boombox\n         * @name onVisibilityChange\n         * @param {Event} e event\n         */\n            this.logger.trace('onVisibilityChange');\n            if (document[this.visibility.hidden]) {\n                this.pause();\n            } else {\n                this.resume();\n            }\n        }\n        onFocus(e) {\n        /**\n         * Firing in the occurrence of events window.onfocus\n         *\n         * @memberof Boombox\n         * @name onFocus\n         * @param {Event} e event\n         */\n            this.logger.trace('onFocus');\n            this.resume();\n        }\n        onBlur(e) {\n        /**\n         * Firing in the occurrence of events window.onblur\n         *\n         * @memberof Boombox\n         * @name onBlur\n         * @param {Event} e event\n         */\n            this.logger.trace('onBlur');\n            this.pause();\n        }\n        onPageShow(e) {\n        /**\n         * Firing in the occurrence of events window.onpageshow\n         *\n         * @memberof Boombox\n         * @name onPageShow\n         * @param {Event} e event\n         */\n            this.logger.trace('onPageShow');\n            this.resume();\n        }\n        onPageHide(e) {\n        /**\n         * Firing in the occurrence of events window.onpagehide\n         *\n         * @memberof Boombox\n         * @name onPageHide\n         * @param {Event} e event\n         */\n            this.logger.trace('onPageHide');\n            this.pause();\n        }\n        _browserControl() {\n        /**\n         * Scan browser differences\n         *\n         * @memberof Boombox\n         * @name _browserControl\n         * @return {Boombox}\n         */\n            if (typeof document.hidden !== 'undefined') {\n                this.visibility.hidden = 'hidden';\n                this.visibility.visibilityChange = 'visibilitychange';\n            } else if (typeof document.webkitHidden !== 'undefined') {\n                this.visibility.hidden = 'webkitHidden';\n                this.visibility.visibilityChange = 'webkitvisibilitychange';\n            } else if (typeof document.mozHidden !== 'undefined') {\n                this.visibility.hidden = 'mozHidden';\n                this.visibility.visibilityChange = 'mozvisibilitychange';\n            } else if (typeof document.msHidden !== 'undefined') {\n                this.visibility.hidden = 'msHidden';\n                this.visibility.visibilityChange = 'msvisibilitychange';\n            }\n            // Visibility.hidden\n            if (this.visibility.hidden) {\n                document.addEventListener(this.visibility.visibilityChange, (e) => {\n                    this.onVisibilityChange(e);\n                }, false);\n            }\n\n            // focus/blur\n            if (typeof window.addEventListener !== 'undefined') {\n                window.addEventListener('focus', (e) => {\n                    this.onFocus(e);\n                }, false);\n                window.addEventListener('blur', (e) => {\n                    this.onBlur(e);\n                }, false);\n            } else {\n                window.attachEvent('onfocusin', (e) => {\n                    this.onFocus(e);\n                }, false);\n                window.attachEvent('onfocusout', (e) => {\n                    this.onBlur(e);\n                }, false);\n            }\n\n            // onpage show/hide\n            window.onpageshow = (e) => {\n                this.onPageShow(e);\n            };\n\n            window.onpagehide = (e) => {\n                this.onPageHide(e);\n            };\n\n            //\n            return this;\n        }\n        addFilter(name, fn) {\n        /**\n         * Adding filtering\n         *\n         * @memberof Boombox\n         * @name addFilter\n         * @param {String} filter name\n         * @param {Function} filter function\n         * @return {Boombox}\n         */\n            this.filter[name] = fn;\n            return this;\n        }\n        dispose() {\n        /**\n         * dispose\n         *\n         * @memberof Boombox\n         * @name dispose\n         */\n            for (let name in this.pool) {\n                let audio = this.pool[name];\n                audio.dispose && audio.dispose();\n            }\n\n            delete this.VERSION;\n            delete this.setuped;\n            delete this.support.mimes;\n            delete this.support.webaudio.use;\n            this.WEB_AUDIO_CONTEXT && delete this.WEB_AUDIO_CONTEXT;\n\n            delete this.support.webaudio;\n            delete this.support.htmlaudio.use;\n            delete this.support.htmlaudio;\n            delete this.support.htmlvideo.use;\n            delete this.support.htmlvideo;\n            delete this.support;\n\n            delete this.pool;\n\n            delete this.waits;\n            delete this.visibility;\n            delete this.state.power;\n            delete this.state;\n            delete this._audio;\n            delete this._video;\n            delete this.filter;\n        }\n    }\n\n\n    //////////////////////////////////\n    // New!!!!\n    var boombox = new Boombox();\n\n\n    //////////////////////////////////\n    // HTMLAudio Class\n\n    class HTMLAudio {\n        constructor(name, parent) {\n            /**\n             * logger\n             * @memberof HTMLAudio\n             * @name logger\n             */\n            this.logger = new Logger('HTMLAudio');\n\n            /**\n             * unique name\n             * @memberof HTMLAudio\n             * @name name\n             */\n            this.name = name;\n\n            /**\n             * SetTimeout#id pool running\n             * @memberof HTMLAudio\n             * @name _timer\n             */\n            this._timer = {}; // setTimeout#id\n\n            /**\n             * AudioSprite option data\n             * @memberof HTMLAudio\n             * @name sprite\n             */\n            this.sprite = undefined;\n            if (parent) {\n                let sprite_n = getSpriteName(name);\n\n                // change Sprite\n                let current = parent.sprite.options[sprite_n.suffix];\n\n                /**\n                 * Reference of the parent instance HTMLAudio\n                 * @memberof HTMLAudio\n                 * @name parent\n                 */\n                this.parent = parent; // ref\n\n                /**\n                 * Reference of the parent state instance HTMLAudio\n                 * @memberof HTMLAudio\n                 * @name state\n                 */\n                this.state = this.parent.state; // ref\n                /**\n                 * Reference of the parent HTMLAudioElement instance HTMLAudio\n                 * @memberof HTMLAudio\n                 * @name state\n                 */\n                this.$el = this.parent.$el; // ref\n                //this.onEnded = this.parent.onEnded; // TODO: ref\n                this.sprite = new Sprite(undefined, current); // new\n\n            } else {\n                this.state = {\n                    time: {\n                        playback: undefined, // Playback start time (unixtime)\n                        pause: undefined // // Seek time paused\n                    },\n                    loop: boombox.LOOP_NOT, // Loop playback flags\n                    power: boombox.POWER_ON, // Power flag\n                    loaded: false, // Audio file is loaded\n                    error: undefined // error state\n                };\n                this.$el = new w.Audio();\n            }\n        }\n        load(options = { preload: 'auto', autoplay: false, loop: false, muted: false, controls: false }, callback = none) {\n        /**\n         * Loading html audio\n         *\n         * @memberof HTMLAudio\n         * @name load\n         * @method\n         * @param {Object} options\n         * @param {Function} callback\n         * @return {HTMLAudio}\n         * @example\n         * .load({\n         *     src: '', // required\n         *     type: '', // optional\n         *     media: '', // optional\n         *     preload: 'auto', // optional\n         *     autoplay: false, // optional\n         *     mediagroup: 'boombox', // optional\n         *     loop: false, // optional\n         *     muted: false, // optional\n         *     crossorigin: \"anonymous\", // optional\n         *     controls: false // optional\n         *     timeout: 15 * 1000 // optional default) 15s\n         * }, function callback() {});\n         *\n         */\n            if (this.parent) { // skip audiosprite children\n                callback(null, this);\n                return this;\n            }\n\n            var timeout = options.timeout || 15 * 1000;\n            delete options.timeout;\n\n            if (options.spritemap) { // Sprite ON\n                this.sprite = new Sprite(options.spritemap);\n                delete options.spritemap;\n            }\n\n\n            for (let k in options) {\n                let v = options[k];\n                this.logger.trace('HTMLAudioElement attribute:', k, v);\n                this.$el[k] = v;\n            }\n\n            // Debug log\n            /**\n            [\"loadstart\",\n             \"progress\",\n             \"suspend\",\n             \"load\",\n             \"abort\",\n             \"error\",\n             \"emptied\",\n             \"stalled\",\n             \"play\",\n             \"pause\",\n             \"loadedmetadata\",\n             \"loadeddata\",\n             \"waiting\",\n             \"playing\",\n             \"canplay\",\n             \"canplaythrough\",\n             \"seeking\",\n             \"seeked\",\n             \"timeupdate\",\n             \"ended\",\n             \"ratechange\",\n             \"durationchange\",\n             \"volumechange\"].forEach(function (eventName) {\n                 self.$el.addEventListener(eventName, function () {\n                     console.log('audio: ' + eventName);\n                 }, true);\n             });\n             */\n\n            var hookEventName = 'canplay';\n            var ua_ios = window.navigator.userAgent.match(/(iPhone\\sOS)\\s([\\d_]+)/);\n            if (ua_ios && 0 < ua_ios.length) { // IOS Safari\n                hookEventName = 'suspend';\n            }\n\n            this.logger.trace('hook event name:', hookEventName);\n\n\n            this.$el.addEventListener(hookEventName,  function _canplay(e) {\n                this.logger.trace('processEvent ' + e.target.id + ' : ' + e.type, 'event');\n\n                this.state.loaded = true;\n\n                this.$el.removeEventListener(hookEventName, _canplay, false);\n\n                return callback(null, this);\n            }.bind(this));\n\n            this.$el.addEventListener(\n                'ended',\n                e => {\n                    this._onEnded(e);\n                },\n                false);\n\n            // communication time-out\n            setTimeout(() => {\n                if (this.$el && this.$el.readyState !== 4) {\n                    this.$el.src = '';\n                    callback(new Error('load of html audio file has timed out. timeout:' + timeout), this);\n                    callback = () => {};\n                }\n            }, timeout);\n\n            this.$el.load();\n\n            return this;\n        }\n        isUse() {\n        /**\n         * Is use.\n         *\n         * @memberof HTMLAudio\n         * @method\n         * @name isUse\n         * @return {Boolean}\n         */\n            if (this.state.power === boombox.POWER_OFF || boombox.state.power === boombox.POWER_OFF) {\n                return false;\n            }\n\n            if (!this.state.loaded || typeof this.state.error !== 'undefined') {\n                return false;\n            }\n\n            return true;\n        }\n        isPlayback() {\n        /**\n         * Is playing.\n         *\n         * @memberof HTMLAudio\n         * @method\n         * @name isPlayback\n         * @return {Boolean}\n         */\n            return !!this.state.time.playback;\n        }\n        isStop() {\n        /**\n         * Is stoped.\n         *\n         * @memberof HTMLAudio\n         * @method\n         * @name isStop\n         * @return {Boolean}\n         */\n            return !this.state.time.playback;\n        }\n        isPause() {\n        /**\n         * Is paused.\n         *\n         * @memberof HTMLAudio\n         * @method\n         * @name isPause\n         * @return {boolean}\n         */\n            return !!this.state.time.pause;\n        }\n        isLoop() {\n        /**\n         * Loop flag\n         *\n         * @memberof HTMLAudio\n         * @method\n         * @name isLoop\n         * @return {Interger}\n         */\n            return (0 < this.state.loop);\n        }\n        isParentSprite() {\n        /**\n         * Is sprite of the parent\n         *\n         * @memberof HTMLAudio\n         * @method\n         * @name isParentSprite\n         * @return {Boolean}\n         */\n            return !!(!this.parent && this.sprite && !this.sprite.current);\n        }\n        isSprite() {\n        /**\n         * Is sprite\n         *\n         * @memberof HTMLAudio\n         * @method\n         * @name isSprite\n         * @return {Boolean}\n         */\n            return !!(this.parent && this.sprite && this.sprite.current);\n        }\n        clearTimerAll() {\n        /**\n         * Clear all the setTimeout\n         *\n         * @memberof HTMLAudio\n         * @method\n         * @name clearTimerAll\n         * @return {HTMLAudio}\n         */\n            for (let k in this._timer) {\n                let id = this._timer[k];\n                this.clearTimer(k);\n            }\n            return this;\n        }\n        clearTimer(name) {\n        /**\n         * Clear specified setTimeout\n         *\n         * @memberof HTMLAudio\n         * @method\n         * @name clearTimer\n         * @param {String} name\n         * @return {Interger}\n         */\n            var id = this._timer[name];\n            if (id) {\n                this.logger.debug('remove setTimetout:', id);\n                clearTimeout(id);\n                delete this._timer[name];\n            }\n\n            return id;\n        }\n        setTimer(name, id) {\n        /**\n         * Save the specified setTimeout\n         *\n         * @memberof HTMLAudio\n         * @method\n         * @name setTimer\n         * @param {String} name\n         * @param {Interger} id setTimeout#id\n         * @return {Interger}\n         */\n            if (this._timer[name]) {\n                this.logger.warn('Access that is not expected:', name, id);\n            }\n            this._timer[name] = id;\n\n            return this._timer[name];\n        }\n        play(resume) {\n        /**\n         * audio play.\n         *\n         * @memberof HTMLAudio\n         * @method\n         * @name play\n         * @param {Boolean} resume resume flag\n         * @return {HTMLAudio}\n         */\n            if (!this.isUse()) {\n                this.logger.debug('skip play:', this.name, 'state can not be used');\n                return this;\n            } // skip!!\n\n            if (this.isPlayback()) {\n                this.logger.debug('skip play:', this.name, 'is playing');\n                return this;\n            }\n\n            var type = 'play';\n            var fn = none;\n\n            this.state.time.playback = Date.now();\n\n            if (resume && this.state.time.pause) {\n                // resume\n                this.setCurrentTime(this.state.time.pause);\n\n                if (this.isSprite()) {\n                    var _pause = this.state.time.pause;\n                    fn = () => {\n                        var interval = Math.ceil((this.sprite.current.end - _pause) * 1000); // (ms)\n\n                        this.setTimer('play', setTimeout(function () {\n                            this.stop();\n                            this._onEnded(); // fire onended evnet\n                        }, interval));\n                    };\n                }\n\n                this.state.time.pause = undefined;\n\n                type = 'resume:';\n\n            } else {\n                // zero-play\n                this.setCurrentTime(0);\n\n                if (this.isSprite()) {\n                    var start = this.sprite.current.start;\n                    this.setCurrentTime(start);\n\n                    fn = function () {\n                        var interval = Math.ceil(self.sprite.current.term * 1000); // (ms)\n                        self.setTimer('play', setTimeout(function () {\n                            self.stop();\n                            self._onEnded(); // fire onended evnet\n                        }, interval));\n                    };\n                }\n\n            }\n\n            this.logger.debug(type, this.name);\n            fn();\n            this.state.time.name = this.name;\n            this.$el.play();\n\n            return this;\n        }\n        stop() {\n        /**\n         * audio stop.\n         *\n         * @memberof HTMLAudio\n         * @method\n         * @name stop\n         * @return {HTMLAudio}\n         */\n            if (!this.state.loaded || typeof this.state.error !== 'undefined') {\n                this.logger.debug('skip stop:', this.name, 'state can not be used');\n                return this;\n            } // skip!!\n\n            if (this.state.time.name && this.state.time.name !== this.name) {\n                this.logger.debug('skip stop: It is used in other sources', this.name, this.state.time.name);\n                return this;\n            } // skip!!\n\n            this.logger.debug('stop:', this.name);\n            this.clearTimer('play');\n            this.$el.pause();\n            this.setCurrentTime(0);\n            this.state.time.playback = undefined;\n            this.state.time.name = undefined;\n            return this;\n        }\n        pause() {\n        /**\n         * audio stop.\n         *\n         * @memberof HTMLAudio\n         * @method\n         * @name stop\n         * @return {HTMLAudio}\n         */\n            if (!this.isUse()) {\n                this.logger.debug('skip pause:', this.name, 'state can not be used');\n                return this;\n            } // skip!!\n\n            if (this.state.time.name && this.state.time.name !== this.name) {\n                this.logger.debug('skip pause: It is used in other sources', this.name, this.state.time.name);\n                return this;\n            } // skip!!\n\n\n            this.logger.debug('pause:', this.name);\n            this.clearTimer('play');\n            this.$el.pause();\n            this.state.time.pause = this.$el.currentTime;\n            this.state.time.playback = undefined;\n\n            return this;\n        }\n        resume() {\n        /**\n         * audio resume.\n         *\n         * @memberof HTMLAudio\n         * @method\n         * @name resume\n         * @return {HTMLAudio}\n         */\n            if (!this.isUse()) {\n                this.logger.debug('skip resume:', this.name, 'state can not be used');\n                return this;\n            } // skip!!\n\n            if (this.state.time.name && this.state.time.name !== this.name) {\n                this.logger.debug('skip resume: It is used in other sources', this.name, this.state.time.name);\n                return this;\n            } // skip!!\n\n            if (this.state.time.pause) {\n                this.play(true);\n            }\n            return this;\n        }\n        replay() {\n        /**\n         * audio re-play.\n         *\n         * @memberof HTMLAudio\n         * @method\n         * @name replay\n         * @return {HTMLAudio}\n         */\n            if (!this.isUse()) {\n                this.logger.debug('skip replay:', this.name, 'state can not be used');\n                return this;\n            } // skip!!\n\n            this.logger.debug('replay:', this.name);\n            this.clearTimer('play');\n            this.pause();\n            this.setCurrentTime(0);\n            this.play();\n            return this;\n        }\n        volume(v) {\n        /**\n         * audio change volume.\n         *\n         * @memberof HTMLAudio\n         * @method\n         * @name volume\n         * @param {Interger} v volume\n         * @return {HTMLAudio}\n         */\n            this.logger.trace('volume:', this.name, 'volume:', v);\n            this.$el.volume = Math.max(0, Math.min(1, v));\n        }\n        _onEnded(e) {\n        /**\n         * Audio.ended events\n         *\n         * @memberof HTMLAudio\n         * @method\n         * @name _onEnded\n         * @param {Event} e event\n         */\n            if (this.isDisposed()) { // check dispose\n                return;\n            }\n            this.logger.trace('onended fire! name:', this.name);\n            this.state.time.playback = undefined;\n            this.state.time.name = undefined;\n\n            this.onEnded(e); // fire user ended event!!\n\n            if (this.isDisposed()) { // check dispose\n                return;\n            }\n            if (this.state.loop === boombox.LOOP_ORIGINAL && typeof this.state.time.pause === 'undefined') {\n                this.logger.trace('onended original loop play.', this.name);\n                this.play();\n            }\n        }\n        onEnded() {\n        /**\n         * Override Audio.ended events\n         *\n         * @memberof HTMLAudio\n         * @method\n         * @name onEnded\n         * @param {Event} e event\n         */\n            none();\n        }\n        setLoop(loop) {\n        /**\n         * Set loop flag\n         *\n         * @memberof HTMLAudio\n         * @method\n         * @name setLoop\n         * @param {Interger} loop loop flag (Boombox.LOOP_XXX)\n         * @return {HTMLAudio}\n         */\n            if (!this.isUse()) { return this; } // skip!!\n\n            this.state.loop = loop;\n            if (loop === boombox.LOOP_NOT) {\n                this.$el.loop = boombox.LOOP_NOT;\n\n            //} else if (loop === boombox.LOOP_ORIGINAL) {\n            } else if (loop === boombox.LOOP_NATIVE) {\n                if (this.isSprite()) {\n                    this.logger.warn('audiosprite does not support the native. please use the original loop.');\n                    return this;\n                }\n                if (this.$el) {\n                    this.$el.loop = loop;\n                }\n            }\n\n            return this;\n        }\n        power(p) {\n        /**\n         * Change power on/off\n         *\n         * @memberof HTMLAudio\n         * @method\n         * @name power\n         * @param {Boolean} p power on/off. Boombox.(POWER_ON|POWER_OFF)\n         * @return {HTMLAudio}\n         */\n            this.logger.trace('power:', this.name, 'flag:', p);\n            if (p === boombox.POWER_OFF) {\n                this.stop(); // force pause\n            }\n            this.state.power = p;\n\n            return this;\n        }\n        setCurrentTime(t) {\n        /**\n         * Set audio.currentTime\n         *\n         * @memberof HTMLAudio\n         * @method\n         * @name setCurrentTime\n         * @param {Interger} t set value(HTMLAudioElement.currentTime)\n         * @return {HTMLAudio}\n         */\n            try {\n                this.$el.currentTime = t;\n            } catch (e) {\n                this.logger.error('Set currentTime.', e.message);\n            }\n            return this;\n        }\n        isDisposed() {\n        /**\n         * Check disposed\n         *\n         * @memberof HTMLAudio\n         * @method\n         * @name isDisposed\n         */\n            return WebAudio.prototype.isDisposed.apply(this, arguments);\n        }\n        dispose() {\n        /**\n         * Dispose\n         *\n         * @memberof HTMLAudio\n         * @method\n         * @name dispose\n         */\n            delete this.name;\n            delete this.state.time.playback;\n            delete this.state.time.pause;\n            delete this.state.time.name;\n            delete this.state.time;\n            delete this.state.loop;\n            delete this.state.power;\n            delete this.state.loaded;\n            delete this.state.error;\n            delete this.state;\n            this.$el.src = undefined;\n            delete this.$el;\n\n            this.clearTimerAll();\n            delete this._timer;\n\n            delete this.parent;\n            if (this.sprite && this.sprite.dispose) {\n                this.sprite.dispose();\n            }\n            delete this.sprite;\n        }\n    }\n    //////////////////////////////////\n    // HTMLVideo Class\n\n    class HTMLVideo extends HTMLAudio {\n        constructor(name, parent) {\n            super(name, parent);\n            /**\n             * logger\n             * @memberof HTMLVideo\n             * @name logger\n             */\n            this.logger = new Logger('HTMLVideo');\n\n            /**\n             * unique name\n             * @memberof HTMLVideo\n             * @name name\n             */\n            this.name = name;\n\n            /**\n             * SetTimeout#id pool running\n             * @memberof HTMLVideo\n             * @name _timer\n             */\n            this._timer = {}; // setTimeout#id\n\n            /**\n             * AudioSprite option data\n             * @memberof HTMLVideo\n             * @name sprite\n             */\n            this.sprite = undefined;\n            if (parent) {\n                var sprite_n = getSpriteName(name);\n\n                // change Sprite\n                var current = parent.sprite.options[sprite_n.suffix];\n\n                /**\n                 * Reference of the parent instance HTMLVideo\n                 * @memberof HTMLVideo\n                 * @name parent\n                 */\n                this.parent = parent; // ref\n\n                /**\n                 * Reference of the parent state instance HTMLVideo\n                 * @memberof HTMLVideo\n                 * @name state\n                 */\n                this.state = this.parent.state; // ref\n\n                /**\n                 * Reference of the parent HTMLVideoElement instance HTMLVideo\n                 * @memberof HTMLAudio\n                 * @name state\n                 */\n                this.$el = this.parent.$el; // ref\n                //this.onEnded = this.parent.onEnded; // TODO: ref\n                this.sprite = new Sprite(undefined, current); // new\n\n            } else {\n                this.state = {\n                    time: {\n                        playback: undefined, // Playback start time (unixtime)\n                        pause: undefined // // Seek time paused\n                    },\n                    loop: boombox.LOOP_NOT, // Loop playback flags\n                    power: boombox.POWER_ON, // Power flag\n                    loaded: false, // Video file is loaded\n                    error: undefined // error state\n                };\n                this.$el = document.createElement('video');\n\n            }\n        }\n        load(options = { preload: 'auto', autoplay: false, loop: false, muted: false, controls: false }, callback = none) {\n        /**\n         * Loading html video\n         *\n         * @memberof HTMLVideo\n         * @name load\n         * @method\n         * @param {Object} options\n         * @param {Function} callback\n         * @return {HTMLVideo}\n         * @example\n         * .load({\n         *     src: '', // required\n         *     type: '', // optional\n         *     media: '', // optional\n         *     preload: 'auto', // optional\n         *     autoplay: false, // optional\n         *     mediagroup: 'boombox', // optional\n         *     loop: false, // optional\n         *     muted: false, // optional\n         *     crossorigin: \"anonymous\", // optional\n         *     controls: false // optional\n         *     timeout: 15 * 1000 // optional default) 15s\n         * }, function callback() {});\n         *\n         */\n            if (this.parent) { // skip audiosprite children\n                callback(null, this);\n                return this;\n            }\n\n            var timeout = options.timeout || 15 * 1000;\n            delete options.timeout;\n\n            if (options.spritemap) { // Sprite ON\n                this.sprite = new Sprite(options.spritemap);\n                delete options.spritemap;\n            }\n\n            for (let k in options) {\n                let v = options[k];\n                self.logger.trace('HTMLVideoElement attribute:', k, v);\n                self.$el[k] = v;\n            }\n\n            /// Debug log\n            /**\n            [\"loadstart\",\n             \"progress\",\n             \"suspend\",\n             \"load\",\n             \"abort\",\n             \"error\",\n             \"emptied\",\n             \"stalled\",\n             \"play\",\n             \"pause\",\n             \"loadedmetadata\",\n             \"loadeddata\",\n             \"waiting\",\n             \"playing\",\n             \"canplay\",\n             \"canplaythrough\",\n             \"seeking\",\n             \"seeked\",\n             \"timeupdate\",\n             \"ended\",\n             \"ratechange\",\n             \"durationchange\",\n             \"volumechange\"].forEach(function (eventName) {\n                 self.$el.addEventListener(eventName, function () {\n                     console.log('audio: ' + eventName);\n                 }, true);\n             });\n             */\n\n            var hookEventName = 'canplay';\n            var ua_ios = window.navigator.userAgent.match(/(iPhone\\sOS)\\s([\\d_]+)/);\n            if (ua_ios && 0 < ua_ios.length) { // IOS Safari\n                hookEventName = 'suspend';\n            } else if (!!window.navigator.userAgent.match(/(Android)\\s+(4)([\\d.]+)/)) { // Android 4 basic\n                hookEventName = 'loadeddata';\n            } else if (!!window.navigator.userAgent.match(/(Android)\\s+(2)([\\d.]+)/)) { // Android 2 basic\n                hookEventName = 'stalled';\n            }\n\n            this.logger.trace('hook event name:', hookEventName);\n\n            this.$el.addEventListener(hookEventName, function _canplay(e) {\n                this.logger.trace('processEvent ' + e.target.id + ' : ' + e.type, 'event');\n\n                this.state.loaded = true;\n\n                this.$el.removeEventListener(hookEventName, _canplay, false);\n\n                return callback(null, this);\n            }.bind(this));\n\n            this.$el.addEventListener(\n                'ended',\n                 e => {\n                    this._onEnded(e);\n                },\n                false);\n\n            // communication time-out\n            setTimeout(() => {\n                if (this.$el && this.$el.readyState !== 4) {\n                    this.$el.src = '';\n                    callback(new Error('load of html video file has timed out. timeout:' + timeout), this);\n                    callback= function () {};\n                }\n            }, timeout);\n\n            this.$el.load();\n\n            return this;\n\n        }\n        isUse() {\n        /**\n         * Is use. (apply HTMLAudio)\n         *\n         * @memberof HTMLVideo\n         * @method\n         * @name isUse\n         * @return {Boolean}\n         */\n            super.isUse();\n        }\n        isPlayback() {\n        /**\n         * Is playing. (apply HTMLAudio)\n         *\n         * @memberof HTMLVideo\n         * @method\n         * @name isPlayback\n         * @return {Boolean}\n         */\n            super.isPlayback();\n        }\n        isStop() {\n        /**\n         * Is stoped.\n         *\n         * @memberof HTMLVideo (apply HTMLAudio)\n         * @method\n         * @name isStop\n         * @return {Boolean}\n         */\n            super.isStop();\n        }\n        isPause() {\n        /**\n         * Is paused.\n         *\n         * @memberof HTMLVideo (apply HTMLAudio)\n         * @method\n         * @name isPause\n         * @return {Boolean}\n         */\n            super.isPause();\n        }\n        isLoop() {\n        /**\n         * Loop flag (apply HTMLAudio)\n         *\n         * @memberof HTMLVideo\n         * @method\n         * @name isLoop\n         * @return {Interger}\n         */\n            super.isLoop();\n        }\n        isParentSprite() {\n        /**\n         * Is sprite of the parent (apply HTMLAudio)\n         *\n         * @memberof HTMLVideo\n         * @method\n         * @name isParentSprite\n         * @return {Boolean}\n         */\n            super.isParentSprite();\n        }\n        isSprite() {\n        /**\n         * Is sprite (apply HTMLAudio)\n         *\n         * @memberof HTMLVideo\n         * @method\n         * @name isSprite\n         * @return {Boolean}\n         */\n            super.isSprite();\n        }\n        clearTimerAll() {\n        /**\n         * Clear all the setTimeout (apply HTMLAudio)\n         *\n         * @memberof HTMLVideo\n         * @method\n         * @name clearTimerAll\n         * @return {HTMLAudio}\n         */\n            super.clearTimerAll();\n        }\n        clearTimer(name) {\n        /**\n         * Clear specified setTimeout (apply HTMLAudio)\n         *\n         * @memberof HTMLVideo\n         * @method\n         * @name clearTimer\n         * @param {String} name\n         * @return {Interger}\n         */\n            super.clearTimer(name);\n        }\n        setTimer(name, id) {\n        /**\n         * Save the specified setTimeout (apply HTMLAudio)\n         *\n         * @memberof HTMLVideo\n         * @method\n         * @name setTimer\n         * @param {String} name\n         * @param {Interger} id setTimeout#id\n         * @return {Interger}\n         */\n            super.setTimer(name, id);\n        }\n        play(resume) {\n        /**\n         * video play.\n         *\n         * @memberof HTMLVideo\n         * @method\n         * @name play\n         * @param {Boolean} resume resume flag\n         * @return {HTMLVideo}\n         */\n            if (!this.isUse()) {\n                this.logger.debug('skip play:', this.name, 'state can not be used');\n                return this;\n            } // skip!!\n\n            if (this.isPlayback()) {\n                this.logger.debug('skip play:', this.name, 'is playing');\n                return this;\n            }\n\n            var type = 'play';\n            var fn = none;\n\n            this.state.time.playback = Date.now();\n\n            if (resume && this.state.time.pause) {\n                // resume\n                this.setCurrentTime(this.state.time.pause);\n\n                if (this.isSprite()) {\n                    var _pause = this.state.time.pause;\n                    fn = () => {\n                        var interval = Math.ceil((this.sprite.current.end - _pause) * 1000); // (ms)\n\n                        this.setTimer('play', setTimeout(function () {\n                            this.stop();\n                            this._onEnded(); // fire onended evnet\n                        }, interval));\n                    };\n                }\n\n                this.state.time.pause = undefined;\n\n                type = 'resume:';\n\n            } else {\n                // zero-play\n                this.setCurrentTime(0);\n\n                if (this.isSprite()) {\n                    var start = this.sprite.current.start;\n                    this.setCurrentTime(start);\n\n                    fn = () => {\n                        var interval = Math.ceil(this.sprite.current.term * 1000); // (ms)\n                        this.setTimer('play', setTimeout(function () {\n                            this.stop();\n                            this._onEnded(); // fire onended evnet\n                        }, interval));\n                    };\n                }\n\n            }\n\n            this.logger.debug(type, this.name);\n            fn();\n            this.state.time.name = this.name;\n            this.$el.play();\n\n            return this;\n\n        }\n        stop() {\n        /**\n         * video stop. (apply HTMLAudio)\n         *\n         * @memberof HTMLVideo\n         * @method\n         * @name stop\n         * @return {HTMLVideo}\n         */\n            super.stop();\n        }\n        pause() {\n        /**\n         * video pause. (apply HTMLAudio)\n         *\n         * @memberof HTMLVideo\n         * @method\n         * @name pause\n         * @return {HTMLVideo}\n         */\n            super.pause();\n        }\n        resume() {\n        /**\n         * video resume. (apply HTMLAudio)\n         *\n         * @memberof HTMLVideo\n         * @method\n         * @name resume\n         * @return {HTMLVideo}\n         */\n            super.resume();\n        }\n        replay() {\n        /**\n         * video re-play. (apply HTMLAudio)\n         *\n         * @memberof HTMLVideo\n         * @method\n         * @name replay\n         * @return {HTMLVideo}\n         */\n            super.replay();\n        }\n        volume(v) {\n        /**\n         * audio change volume. (apply HTMLAudio)\n         *\n         * @memberof HTMLVideo\n         * @method\n         * @name volume\n         * @return {HTMLVideo}\n         */\n            super.volume(v);\n        }\n        _onEnded(e) {\n        /**\n         * Video.ended events (apply HTMLAudio)\n         *\n         * @memberof HTMLVideo\n         * @method\n         * @name _onEnded\n         * @param {Event} e event\n         */\n            super._onEnded(e);\n        }\n        onEnded() {\n        /**\n         * Override Video.ended events (apply HTMLAudio)\n         *\n         * @OVERRIDE ME\n         * @memberof HTMLVideo\n         * @method\n         * @name onEnded\n         * @param {Event} e event\n         */\n            none();\n        }\n        setLoop(loop) {\n        /**\n         * Set loop flag (apply HTMLAudio)\n         *\n         * @memberof HTMLVideo\n         * @method\n         * @name setLoop\n         * @param {Interger} loop loop flag (Boombox.LOOP_XXX)\n         * @return {HTMLVideo}\n         */\n            super.setLoop(loop);\n        }\n        power(p) {\n        /**\n         * Change power on/off (apply HTMLAudio)\n         *\n         * @memberof HTMLVideo\n         * @method\n         * @name power\n         * @param {Boolean} p power on/off. boombox.(POWER_ON|POWER_OFF)\n         * @return {HTMLVideo}\n         */\n            super.power(p);\n        }\n        setCurrentTime(t) {\n        /**\n         * Set video.currentTime (apply HTMLAudio)\n         *\n         * @memberof HTMLVideo\n         * @method\n         * @name setCurrentTime\n         * @param {Interger} t set value(Video.currentTime)\n         * @return {HTMLVideo}\n         */\n            super.setCurrentTime(t);\n        }\n        isDisposed() {\n        /**\n         * Check disposed\n         *\n         * @memberof HTMLVideo\n         * @method\n         * @name isDisposed\n         */\n            super.isDisposed();\n        }\n        dispose() {\n        /**\n         * Dispose (apply HTMLAudio)\n         *\n         * @memberof HTMLVideo\n         * @method\n         * @name dispose\n         */\n            super.dispose();\n        }\n    }\n\n    //////////////////////////////////\n    // WebAudio Class\n\n    class WebAudio extends HTMLAudio {\n        constructor(name, parent) {\n            super(name, parent);\n            /**\n             * logger\n             * @memberof WebAudio\n             * @name logger\n             */\n            this.logger = new Logger('WebAudio');\n\n            /**\n             * Audio name\n             *\n             * @memberof WebAudio\n             * @name name\n             * @type {String}\n             */\n            this.name = name;\n\n            /**\n             * SetTimeout#id pool running\n             * @memberof WebAudio\n             * @name _timer\n             */\n            this._timer = {};\n\n            /**\n             * AudioSprite option data\n             * @memberof WebAudio\n             * @name sprite\n             */\n            this.sprite = undefined;\n\n            /**\n             * AudioBuffer in use\n             *\n             * @memberof WebAudio\n             * @name buffer\n             * @type {AudioBuffer}\n             */\n            this.buffer = undefined;\n\n            /**\n             * AudioBufferSourceNode in use\n             *\n             * @memberof WebAudio\n             * @name source\n             * @type {AudioBufferSourceNode}\n             */\n            this.source = undefined;\n\n            /**\n             * WebAudioContext in use\n             *   shortcut: boombox.WEB_AUDIO_CONTEXT\n             *\n             * @memberof WebAudio\n             * @name ctx\n             * @type {AudioContext}\n             */\n            this.ctx = boombox.WEB_AUDIO_CONTEXT;\n\n            /**\n             * WebAudioContext.GainNode instance\n             * @memberof WebAudio\n             * @name gainNode\n             * @type {GainNode}\n             */\n            this.gainNode = this.ctx.createGain();\n\n\n            /**\n             * State of Audio\n             *\n             * @memberof WebAudio\n             * @name state\n             * @type {Object}\n             */\n            this.state = {\n                time: {\n                    playback: undefined, // Playback start time (unixtime)\n                    pause: undefined, // Seek time paused\n                    progress: 0 // Sound progress time\n                },\n                loop: boombox.LOOP_NOT, // Loop playback flags\n                power: boombox.POWER_ON, // power flag\n                loaded: false, // Audio file is loaded\n                error: undefined // error state\n            };\n\n            if (parent) {\n                var sprite_n = getSpriteName(name);\n\n\n                this.parent = parent; // ref\n                //this.state = this.parent.state; // ref\n                this.state.loaded = this.parent.state.loaded; // not ref copy\n                this.state.error = this.parent.state.error; // not ref copy\n\n\n                //this.$el = this.parent.$el; // ref\n                //this.onEnded = this.parent.onEnded; // TODO: ref\n\n                // change Sprite\n                var current = parent.sprite.options[sprite_n.suffix];\n                this.sprite = new Sprite(undefined, current); // new\n            }\n        }\n        load(options = {}, callback = none) {\n        /**\n         * Loading web audio\n         *\n         * @memberof WebAudio\n         * @name load\n         * @method\n         * @param {Object} options\n         * @param {Function} callback\n         * @return {WebAudio}\n         * @example\n         * .load({\n         *     src: 'http://example.com/audio.m4a',\n         *     timeout: 15 * 1000\n         * }, function callback() {});\n         *\n         */\n            if (this.parent) {\n                //this.buffer = this.parent.buffer; // ref\n                callback(null, this);\n                return this;\n            }\n\n            if (options.spritemap) { // Sprite ON\n                this.sprite = new Sprite(options.spritemap);\n                delete options.spritemap;\n            }\n\n            for (let k in options) {\n                let v = options[k];\n                this.logger.trace('WebAudio attribute:', k, v);\n            }\n\n\n            var http = new XMLHttpRequest();\n            http.onload = e => {\n                if (e.target.status.toString().charAt(0) === '2') {\n                    this.ctx.decodeAudioData(\n                        http.response,\n                        buffer => {\n                            if (!buffer) {\n                                this.logger.error('error decode file data: ', options.url);\n                                return callback(new Error('error decode file data'), this);\n                            }\n\n                            this.buffer = buffer;\n\n                            this.state.loaded = true;\n\n                            /////\n                            // audiosprite propagation\n                            if (this.isParentSprite()) {\n                                for (let k in boombox.pool) {\n                                    if (!!~k.indexOf(this.name + SPRITE_SEPARATOR)) {\n                                        boombox.pool[k].buffer = buffer; // ref buffer\n                                        boombox.pool[k].state.loaded = this.state.loaded;  // not ref copy\n                                    }\n                                }\n                            }\n\n\n                            return callback(null, this);\n                        },\n                        () => {\n                            return callback(new Error('fail to decode file data'), this);\n                        }\n                    );\n                } else {\n                    this.logger.error('fail to load resource: ', options.url);\n                    return callback(new Error('fail to load resource'), this);\n                }\n            };\n\n            //http.timeout = 1;\n            var timeout = options.timeout || 15 * 1000;\n\n            // communication time-out\n            setTimeout(() => {\n                if (http.readyState !== 4) {\n                    http.abort();\n                    callback(new Error('load of web audio file has timed out. timeout:' + timeout), this);\n                    callback = none;\n                }\n            }, timeout);\n\n\n            http.open('GET', options.src, true);\n\n            http.responseType = 'arraybuffer';\n\n            /////////////////////\n            /// XHR send!!\n            http.send();\n\n            return this;\n        }\n        isUse() {\n        /**\n         * Is use. (apply HTMLAudio)\n         *\n         * @memberof WebAudio\n         * @method\n         * @name isUse\n         * @return {Boolean}\n         */\n            super.isUse();\n        }\n        isPlayback() {\n        /**\n         * Is playing. (apply HTMLAudio)\n         *\n         * @memberof WebAudio\n         * @method\n         * @name isPlayback\n         * @return {Boolean}\n         */\n            return !!this.source && !!this.state.time.playback && !this.state.time.pause && (this.source.playbackState === 1 || this.source.playbackState === 2);\n        }\n        isStop() {\n        /**\n         * Is stoped. (apply HTMLAudio)\n         *\n         * @memberof WebAudio\n         * @method\n         * @name isStop\n         * @return {Boolean}\n         */\n            return !this.source;\n        }\n        isPause() {\n        /**\n         * Is paused. (apply HTMLAudio)\n         *\n         * @memberof WebAudio\n         * @method\n         * @name isPause\n         * @return {Boolean}\n         */\n            super.isPause();\n        }\n        isLoop() {\n        /**\n         * Loop flag (apply HTMLAudio)\n         *\n         * @memberof WebAudio\n         * @method\n         * @name isLoop\n         * @return {Interger}\n         */\n            super.isLoop();\n        }\n        isParentSprite() {\n        /**\n         * Is sprite of the parent (apply HTMLAudio)\n         *\n         * @memberof WebAudio\n         * @method\n         * @name isParentSprite\n         * @return {Boolean}\n         */\n            super.isParentSprite();\n        }\n        isSprite() {\n        /**\n         * Is sprite of the parent (apply HTMLAudio)\n         *\n         * @memberof WebAudio\n         * @method\n         * @name isParentSprite\n         * @return {Boolean}\n         */\n            super.isSprite();\n        }\n        clearTimerAll() {\n        /**\n         * Clear all the setTimeout (apply HTMLAudio)\n         *\n         * @memberof WebAudio\n         * @method\n         * @name clearTimerAll\n         * @return {WebAudio}\n         */\n            super.clearTimerAll();\n        }\n        clearTimer(name) {\n        /**\n         * Clear specified setTimeout (apply HTMLAudio)\n         *\n         * @memberof WebAudio\n         * @method\n         * @name clearTimer\n         * @param {String} name\n         * @return {Interger}\n         */\n            super.clearTimer(name);\n        }\n        setTimer(name, id) {\n        /**\n         * Save the specified setTimeout (apply HTMLAudio)\n         *\n         * @memberof WebAudio\n         * @method\n         * @name setTimer\n         * @param {String} name\n         * @param {Interger} id setTimeout#id\n         * @return {Interger}\n         */\n            super.setTimer(name, id);\n        }\n        play(resume) {\n        /**\n         * audio play.\n         *\n         * @memberof WebAudio\n         * @method\n         * @name play\n         * @return {WebAudio}\n         */\n            if (!this.isUse()) {\n                this.logger.debug('skip play:', this.name, 'state can not be used');\n                return this;\n            } // skip!!\n\n            if (this.isPlayback()) {\n                this.logger.debug('skip play:', this.name, 'is playing');\n                return this;\n            }\n\n            if (!resume) {\n                this.sourceDispose();\n            }\n\n            this.source = this.ctx.createBufferSource();\n\n            if (this.state.loop === boombox.LOOP_NATIVE) {\n                this.source.loop = this.state.loop;\n            }\n\n            this.source.buffer = this.buffer;\n\n            this.source.connect(this.gainNode);\n            this.gainNode.connect(this.ctx.destination);\n\n            var type = 'play';\n            var fn = none;\n            var start = 0;\n\n            this.state.time.playback = Date.now(); // Playback start time (ms)\n\n            if (resume && this.state.time.pause) {\n                // resume\n                start = this.state.time.pause / 1000; // Start position (sec)\n                //this.logger.trace('start:', start);\n                //this.logger.warn('interval:', interval);\n\n                if (this.isSprite()) {\n                    var pause_sec = this.state.time.pause / 1000; // (sec)\n                    start = this.sprite.current.start + pause_sec; // Start position (sec)\n                    var interval = Math.ceil((this.sprite.current.term - pause_sec) * 1000); // (ms)\n                    fn = () => {\n                        this.setTimer('play', setTimeout(() => {\n                            this.stop();\n                            this._onEnded(); // fire onended evnet\n                        }, interval));\n\n                    };\n                }\n\n\n                this.state.time.pause = undefined;\n\n            } else { // zero\n\n                if (this.isSprite()) {\n                    start = this.sprite.current.start;\n\n                    fn = () => {\n                        var interval = Math.ceil(this.sprite.current.term * 1000);\n\n                        this.setTimer('play', setTimeout(() => {\n                            this.stop();\n                            this._onEnded(); // fire onended evnet\n                        }, interval));\n                    };\n\n                }\n\n            }\n\n            this.logger.debug(type, this.name, 'offset:', start);\n            fn();\n\n            var duration = this.buffer.duration - start;\n            if (!this.isSprite()) {\n                if (this.source.hasOwnProperty('onended')) {\n                    this.source.onended = e => {\n                        this._onEnded(e);\n                    };\n                } else {\n                    var interval = Math.ceil(duration * 1000);\n                    this.setTimer('play', setTimeout(() => {\n                        this.stop();\n                        this._onEnded();\n                    }, interval));\n                }\n            }\n\n            if (this.source.start) {\n                this.logger.debug('use source.start()', this.name, start, duration);\n                this.source.start(0, start, this.buffer.duration);\n            } else {\n                if (this.isSprite()) {\n                    duration = this.sprite.current.term;\n                }\n                this.logger.debug('use source.noteGrainOn()', this.name, start, duration);\n                this.source.noteGrainOn(0, start, duration);\n            }\n\n            return this;\n        }\n        stop() {\n        /**\n         * audio stop.\n         *\n         * @memberof WebAudio\n         * @method\n         * @name stop\n         * @return {WebAudio}\n         */\n            if (!this.state.loaded || typeof this.state.error !== 'undefined') {\n                this.logger.debug('skip stop:', this.name, 'state can not be used');\n                return this;\n            } // skip!!\n\n            this.logger.debug('stop:', this.name);\n\n            this.clearTimer('play');\n\n            if (this.source) {\n                if (this.source.stop) {\n                    this.logger.debug('stop: use source.stop()', this.name);\n                    this.source.stop(0);\n                } else {\n                    this.logger.debug('stop: use source.noteOff()', this.name);\n                    this.source.noteOff(0);\n                }\n            }\n\n            this.sourceDispose();\n\n            return this;\n        }\n        pause() {\n        /**\n         * audio pause.\n         *\n         * @memberof WebAudio\n         * @method\n         * @name pause\n         * @return {WebAudio}\n         */\n            if (!this.isUse()) {\n                this.logger.debug('skip pause:', this.name, 'state can not be used');\n                return this;\n            } // skip!!\n\n            if (!this.source) {\n                this.logger.debug('skip pause, Not playing.');\n                return this;\n            }\n            if (this.state.time.pause) {\n                this.logger.debug('skip pause, It is already paused.');\n                return this;\n            }\n\n            var now = Date.now();\n            var offset = now - this.state.time.playback;\n            this.state.time.pause = this.state.time.progress + offset; // Pause time(ms)\n            this.state.time.progress += offset;\n            this.logger.trace('state.time.pause:', this.state.time.pause, 'now:', now, 'state.time.playback', this.state.time.playback);\n\n            this.logger.debug('pause:', this.name);\n            this.clearTimer('play');\n\n            if (this.source) {\n                if (this.source.stop) {\n                    this.logger.debug('pause: use source.stop()', this.name);\n                    this.source.stop(0);\n                } else {\n                    this.logger.debug('pause: use source.noteOff()', this.name);\n                    this.source.noteOff(0);\n                }\n            }\n\n            return this;\n        }\n        resume() {\n        /**\n         * audio resume.\n         *\n         * @memberof WebAudio\n         * @method\n         * @name resume\n         * @return {WebAudio}\n         */\n            if (!this.isUse()) {\n                this.logger.debug('skip resume:', this.name, 'state can not be used');\n                return this;\n            } // skip!!\n\n            if (this.state.time.pause) {\n                this.play(true);\n            }\n            return this;\n        }\n        replay() {\n        /**\n         * audio re-play.\n         *\n         * @memberof WebAudio\n         * @method\n         * @name replay\n         * @return {WebAudio}\n         */\n            if (!this.isUse()) {\n                this.logger.debug('skip replay:', this.name, 'state can not be used');\n                return this;\n            } // skip!!\n\n            this.logger.debug('replay:', this.name);\n            this.clearTimer('play');\n\n            this.sourceDispose();\n            this.play();\n            return this;\n        }\n        volume(v) {\n        /**\n         * audio change volume.\n         *\n         * @memberof WebAudio\n         * @method\n         * @name volume\n         * @return {WebAudio}\n         */\n            this.logger.trace('volume:', this.name, 'volume:', v);\n            this.gainNode.gain.value = v;\n        }\n        _onEnded(e) {\n        /**\n         * Audio.ended events\n         *\n         * @memberof WebAudio\n         * @method\n         * @name _onEnded\n         * @param {Event} e event\n         */\n            // check dispose\n            if (this.isDisposed()) {\n                return;\n            }\n\n            var self = this;\n            var now = Date.now();\n\n            // skip if sounds is not ended\n            if (self.source && Math.abs((now - self.state.time.playback + self.state.time.progress) / 1000 - self.source.buffer.duration) >= boombox.THRESHOLD) {\n                self.logger.debug('skip if sounds is not ended', self.name);\n                return;\n            }\n\n            this.logger.trace('onended fire!', this.name);\n            this.state.time.playback = undefined;\n            this.onEnded(e); // fire user ended event!!\n\n            // check dispose\n            if (this.isDisposed()) {\n                return;\n            }\n\n            if (this.state.loop && typeof this.state.time.pause === 'undefined') {\n                this.logger.trace('onended loop play.');\n                this.play();\n            } else {\n                this.sourceDispose();\n            }\n        }\n        onEnded() {\n        /**\n         * Override Audio.ended events\n         *\n         * @memberof WebAudio\n         * @method\n         * @name onEnded\n         * @param {Event} e event\n         */\n            none();\n        }\n        setLoop(loop) {\n        /**\n         * Set loop flag\n         *\n         * @memberof WebAudio\n         * @method\n         * @name setLoop\n         * @param {Interger} loop loop flag (boombox.LOOP_XXX)\n         * @return {WebAudio}\n         */\n            if (!this.isUse()) { return this; } // skip!!\n\n            this.state.loop = loop;\n            if (loop === boombox.LOOP_NOT) {\n                if (this.source) {\n                    this.source.loop = boombox.LOOP_NOT;\n                }\n\n                //} else if (loop === boombox.LOOP_ORIGINAL) {\n            } else if (loop === boombox.LOOP_NATIVE) {\n                if (this.source) {\n                    this.source.loop = loop;\n                }\n            }\n            return this;\n\n        }\n        power(p) {\n        /**\n         * Change power on/off (apply HTMLAudio)\n         *\n         * @memberof WebAudio\n         * @method\n         * @name power\n         * @param {Boolean} p power on/off. boombox.(POWER_ON|POWER_OFF)\n         * @return {WebAudio}\n         */\n            super.power(p);\n        }\n        sourceDispose() {\n        /**\n         * Dispose AudioBufferSourceNode\n         *\n         * @memberof WebAudio\n         * @method\n         * @name sourceDispose\n         */\n            this.logger.trace('source dispose', this.name);\n            this.source && this.source.disconnect();\n            this.source = undefined;\n            this.state.time.playback = undefined;\n            this.state.time.pause = undefined;\n            this.state.time.progress = 0;\n        }\n        isDisposed() {\n        /**\n         * Check disposed\n         * @memberof WebAudio\n         * @method\n         * @name isDisposed\n         */\n            this.logger.trace('check dispose flag', !!this.state);\n            return !this.state;\n        }\n        dispose() {\n        /**\n         * Dispose\n         *\n         * @memberof WebAudio\n         * @method\n         * @name dispose\n         */\n            this.logger.trace('WebAudio dispose', this.name);\n\n            delete this.buffer;\n\n            this.sourceDispose();\n            delete this.source;\n            this.clearTimerAll();\n            delete this._timer;\n\n            delete this.state.time;\n            delete this.state.loop;\n            delete this.state.power;\n            delete this.state.loaded;\n            delete this.state.error;\n            delete this.state;\n\n            this.parent = null;\n            delete this.parent;\n\n            if (this.sprite && this.sprite.dispose) {\n                this.sprite.dispose();\n            }\n            delete this.sprite;\n\n            delete this.name;\n            this.gainNode && this.gainNode.disconnect && delete this.gainNode;\n            this.ctx = null;\n        }\n    }\n\n    class Sprite {\n        constructor(options, current) {\n            /**\n             * logger\n             * @memberof Sprite\n             * @type {Logger}\n             * @name logger\n             */\n            this.logger = new Logger('Sprite   ');\n            /**\n             * current options\n             * @memberof Sprite\n             * @type {Object}\n             * @name current\n             */\n            this.current = current; // target sprite\n            /**\n             * options\n             * @memberof Sprite\n             * @name options\n             * @type {Object}\n             */\n            this.options = options;\n            if (!current) { // parent\n                for (let k in this.options) {\n                    this.options[k].term = this.options[k].end - this.options[k].start;\n                }\n            }\n        }\n        dispose() {\n        /**\n         * Dispose\n         * @memberof Sprite\n         * @method\n         * @name dispose\n         */\n            this.options = null;\n            delete this.options;\n            delete this.current;\n        }\n    }\n\n    // Building\n    boombox.HTMLAudio = HTMLAudio;\n    boombox.HTMLVideo = HTMLVideo;\n    boombox.WebAudio  = WebAudio;\n\n    if (isRequire) {\n        define([], function () {\n            return boombox;\n        });\n    } else {\n        w.boombox = boombox;\n    }\n\n})(window);\n"]}